//------------------------------------------------------------------------------
// Include
//------------------------------------------------------------------------------
#include "msgQ.h"
//------------------------------------------------------------------------------
// Constant
//------------------------------------------------------------------------------
#define Q_KEY	0x100
//------------------------------------------------------------------------------
// Type definition
//------------------------------------------------------------------------------
// Local
//------------------------------------------------------------------------------
CLSqueue RcvQue;
MSG_DESC MsgDesc[1] = { {Q_KEY, "TEST_Q"} };
//------------------------------------------------------------------------------
// ReadRcvQ
//------------------------------------------------------------------------------
bool ReadRcvQ(void)
{
	int count = 0;
	int num = 0;
	char buffer[1024];
	printf("ReadRcvQ\n");

	if ((count = RcvQue.Recv(buffer, 256)) <= 0)
	{
		if (count < 0)
			printf("Q Rcv fail\n");
		return (false);
	}

	num = RcvQue.GetNumber(buffer, 4);
	printf("RCV Q :%d\n", num);
	return (true);
}
//------------------------------------------------------------------------------
// main
//------------------------------------------------------------------------------
int main(int argc, char **argv)
{
	printf("RCV MSG QUEUE TEST\n");
	int num = 0;
	char buffer[1024];

	bool initOK;
	initOK = true;

	while (initOK)
	{
		ReadRcvQ();
		sleep(2);	// 2 second
	}


	return (0);
}